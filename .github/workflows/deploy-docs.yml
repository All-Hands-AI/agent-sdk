---
name: Dispatch to docs repo

on:
    push:
        branches: [main]
        paths:
            - openhands-agent-server/**
    workflow_dispatch:

jobs:
    dispatch:
        runs-on: blacksmith-2vcpu-ubuntu-2404
        steps:
            - name: Trigger docs repo sync
              uses: peter-evans/repository-dispatch@v4
              with:
                  token: ${{ secrets.ALLHANDS_BOT_GITHUB_PAT }}
                  repository: All-Hands-AI/docs
                  event-type: update-agent-sdk
                  client-payload: '{"ref": "${{ github.ref }}", "sha": "${{ github.sha }}"}'
